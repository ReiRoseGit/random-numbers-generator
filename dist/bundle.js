(()=>{"use strict";var t={299:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function o(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.HttpGeneration=void 0;const s=n(918);e.HttpGeneration=class{constructor(t){this.url=t}printStaticNumbers(t,e,n,r,o){return i(this,void 0,void 0,(function*(){const i=yield this.getStaticJSON(r);this.writeData(t,e,n,i),s.Output.getAndPrintHistory(o,"/history")}))}getStaticJSON(t){return i(this,void 0,void 0,(function*(){return(yield fetch(this.url,{method:"POST",body:new FormData(t)})).json()}))}writeData(t,e,n,i){t.innerHTML=s.Output.outputNumbers(i.unsorted_numbers),e.innerHTML=s.Output.outputNumbers(i.sorted_numbers),n.innerHTML=i.time+" ns"}}},918:function(t,e){var n=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function o(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Output=void 0;class i{static outputNumbers(t){return t.join(" ")}static printLastGenerations(t,e){if(t.innerHTML="",e.length>0){for(let n=0;n<e.length;n++)t.innerHTML+=`<div class="accordion__item">\n                <div class="accordion__header" style="display: flex;">\n                    Генерация #${n+1} : дата ${e[n].created_at}\n                </div>\n                <div class="accordion__body">\n                    <div class="previous-generations__unsorted_numbers"><strong>Неотсортированные данные:</strong> ${i.outputNumbers(e[n].unsorted_numbers)}</div>\n                    <div class="previous-generations__unsorted_numbers"><strong>Отсортированные данные:</strong> ${i.outputNumbers(e[n].sorted_numbers)}</div>\n                    <div class="previous-generations__unsorted_numbers"><strong>Время генерации:</strong> ${e[n].time} ns</div>\n                </div>\n              </div>`;t.querySelectorAll(".accordion__item").forEach((t=>{t.addEventListener("click",(e=>{t.classList.contains("accordion__item_show")?t.classList.remove("accordion__item_show"):t.classList.add("accordion__item_show")}))}))}else t.innerHTML='<h6 style="text-align: center;">Для отображения истории необходимо выполнить хотя бы одну генерацию!</h6>'}static getAndPrintHistory(t,e){return n(this,void 0,void 0,(function*(){const n=yield fetch(e,{method:"GET"});i.printLastGenerations(t,yield n.json())}))}static clearDataBase(t){return n(this,void 0,void 0,(function*(){yield fetch(t,{method:"DELETE"})}))}}e.Output=i},890:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Validation=void 0,e.Validation=class{static cleanParams(t,e){this.cleandOutputFields(t,e);try{return this.isCorrectValues(t,e),this.cleandOutputFields(t,e),!0}catch(t){return!1}}static isCorrectValues(t,e){const n=Number(t.value),i=Number(e.value);if(n<1&&i<1)throw t.classList.add("is-invalid"),e.classList.add("is-invalid"),new Error("Недопустимые параметры");if(n<1)throw t.classList.add("is-invalid"),new Error("Недопустимые параметры");if(i<1||i>500)throw e.classList.add("is-invalid"),new Error("Недопустимые параметры")}static cleandOutputFields(...t){t.forEach((t=>t.classList.remove("is-invalid")))}}},880:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebsocketGeneration=void 0;const i=n(918);e.WebsocketGeneration=class{constructor(t){this.websocket=new WebSocket(t)}getDynamicNumbers(t,e){this.websocket.send(JSON.stringify({bound:t,flows:e}))}setFieldsAndData(t,e,n,s){t.innerHTML=e.innerHTML=n.innerHTML="",this.websocket.onmessage=r=>{if(r.data.includes("created_at"))i.Output.getAndPrintHistory(s,"/history");else if(r.data.includes("time")){const t=JSON.parse(r.data);e.innerHTML=i.Output.outputNumbers(t.sorted_numbers),n.innerHTML=t.time+" ns"}else t.innerHTML+=r.data+" "}}printDynamicNumbers(t,e,n,i,s,r){this.getDynamicNumbers(t,e),this.setFieldsAndData(n,i,s,r)}}},913:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(s,r){function o(t){try{c(i.next(t))}catch(t){r(t)}}function a(t){try{c(i.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const s=n(890),r=n(299),o=n(880),a=n(918),c=document.getElementById("formElem"),u=document.getElementById("data__unsorted"),d=document.getElementById("data__sorted"),l=document.getElementById("data__time"),m=document.getElementById("previousGenerations__accordion"),v=new o.WebsocketGeneration("ws://localhost:3000/ws"),h=new r.HttpGeneration("/numbers"),_=document.getElementById("db_delete");function f(t){return i(this,void 0,void 0,(function*(){t.preventDefault();const e=document.querySelector("#bound"),n=document.querySelector("#flows");if(e&&n&&u&&d&&l&&s.Validation.cleanParams(e,n)){const t=document.querySelector("#exampleCheck1");t&&t.checked&&m?v.printDynamicNumbers(e.value,n.value,u,d,l,m):c&&m&&h.printStaticNumbers(u,d,l,c,m)}}))}document.addEventListener("DOMContentLoaded",(()=>c.addEventListener("submit",f))),document.addEventListener("DOMContentLoaded",(()=>a.Output.getAndPrintHistory(m,"/history"))),document.addEventListener("DOMContentLoaded",(()=>{_.addEventListener("click",(()=>{a.Output.clearDataBase("/history"),a.Output.getAndPrintHistory(m,"/history")}))}))}},e={};!function n(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}(913)})();